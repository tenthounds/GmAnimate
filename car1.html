<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .container{
            height: 505px;
            width:980px;
            margin: 0 auto;
        }
        .road_bg{
            width: 100%;
            height: 100%;
            background-position: left top;
            background-image: url("../../../../var/www/html/bocat_2.0/userpublic/assets/images/game/pk10/racingGame/road_bg.png");
        }
        .road_bg{
            width: 100%;
        }
        .road_top road_ready{
            display: block;
        }
        .road_top road_ready_1{
            display: block;
        }
        .road_top road_ready_2{
            display: block;
        }
        .road_top road_ready_3{
            display: block;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="road_bg">
        <div class="road_top">
            <div class="road_ready road_ready_3"></div>
        </div>
        <div class="road road_begin" style="background-position: right top; width: 980px;">
            <div class="road_row" style="width: 980px;">
                <div class="cls_car" id="car_1" style="margin-right: 0px;">
                    <div class="gush_fire"></div>
                </div>
            </div>
            <div class="road_row" style="width: 980px;">
                <div class="cls_car" id="car_2" style="margin-right: 0px;">
                    <div class="gush_fire"></div>
                </div>
            </div>
            <div class="road_row" style="width: 980px;">
                <div class="cls_car" id="car_3" style="margin-right: 0px;">
                    <div class="gush_fire"></div>
                </div>
            </div>
            <div class="road_row" style="width: 980px;">
                <div class="cls_car" id="car_4" style="margin-right: 0px;">
                    <div class="gush_fire"></div>
                </div>
            </div>
            <div class="road_row" style="width: 980px;">
                <div class="cls_car" id="car_5" style="margin-right: 0px;">
                    <div class="gush_fire"></div>
                </div>
            </div>
            <div class="road_row" style="width: 980px;">
                <div class="cls_car" id="car_6" style="margin-right: 0px;">
                    <div class="gush_fire"></div>
                </div>
            </div>
            <div class="road_row" style="width: 980px;">
                <div class="cls_car" id="car_7" style="margin-right: 0px;">
                    <div class="gush_fire"></div>
                </div>
            </div>
            <div class="road_row" style="width: 980px;">
                <div class="cls_car" id="car_8" style="margin-right: 0px;">
                    <div class="gush_fire"></div>
                </div>
            </div>
            <div class="road_row" style="width: 980px;">
                <div class="cls_car" id="car_9" style="margin-right: 0px;">
                    <div class="gush_fire"></div>
                </div>
            </div>
            <div class="road_row" style="width: 980px;">
                <div class="cls_car" id="car_10" style="margin-right: 0px;">
                    <div class="gush_fire"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<div style="width: 100px;height: 100px;background-color: red" id="ani"></div>
日期：<input type="text" id="date">
</body>
<script src="http://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g="
        crossorigin="anonymous"></script>
<script>
    Date.prototype.Format = function (fmt) {
        var o = {
            "M+": this.getMonth() + 1, //月份
            "d+": this.getDate(), //日
            "h+": this.getHours(), //小时
            "m+": this.getMinutes(), //分
            "s+": this.getSeconds(), //秒
            "q+": Math.floor((this.getMonth() + 3) / 3), //季度
            "S": this.getMilliseconds() //毫秒
        };
        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        for (var k in o)
            if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
        return fmt;
    }
    $('#date').val(new Date(Date.parse('2017-01-10'.replace(/-/g,"/"))).Format('yyyy-MM-dd'));
    function animate(obj, json, interval, sp, fn) {

        clearInterval(obj.timer);
        //var k = 0;
        //var j = 0;
        function getStyle(obj, arr) {
            if(obj.currentStyle){
                return obj.currentStyle[arr];    //针对ie
            } else {
                return document.defaultView.getComputedStyle(obj, null)[arr];
            }
        }
        obj.timer = setInterval(function(){
            //j ++;
            var flag = true;
            for(var arr in json) {
                var icur = 0;
                //k++;
                if(arr == "opacity") {
                    icur = Math.round(parseFloat(getStyle(obj, arr))*100);
                } else {
                    icur = parseInt(getStyle(obj, arr));
                }
                var speed = (json[arr] - icur) * sp;
                speed = speed > 0 ? Math.ceil(speed): Math.floor(speed);
                //speed = speed > 0 ?  Math.floor(speed):Math.ceil(speed);
                console.log(speed);
                if(icur != json[arr]){
                    flag = false;
                }
                if(arr == "opacity"){
                    obj.style.filter = "alpha(opacity : '+(icur + speed)+' )";
                    obj.style.opacity = (icur + speed)/100;
                }else {
                    obj.style[arr] = icur + speed + "px";

                }
                //console.log(j + "," + arr +":"+ flag);
            }

            if(flag){
                clearInterval(obj.timer);
                //console.log(j + ":" + flag);
                //console.log("k = " + k);
                //console.log("j = " + j);
                //console.log("DONE");
                if(fn){
                    fn();
                }
            }
        },interval);
    }
</script>
</html>